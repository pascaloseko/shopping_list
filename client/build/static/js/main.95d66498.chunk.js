(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){e.exports=a(80)},47:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(11),c=a.n(l),o=(a(45),a(47),a(8)),u=a(91),i=a(92),s=a(93),m=a(94),d=a(95),E=a(96),p=a(97),g=a(9),f=a(82),b=a(102),O=a(83),h=a(84),S=a(85),j=a(86),y=a(87),v=a(88),I=a(89),A=a(90),L=a(16),C=a.n(L),_=function(e,t){return{type:"GET_ERRORS",payload:{msg:e,status:t,id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}},R=function(){return{type:"CLEAR_ERRORS"}},T=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};if(""!==t){var n="Bearer "+t;a.headers.Authorization=n}return a},w=Object(g.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}},{register:function(e){var t=e.name,a=e.email,n=e.password;return function(e){var r=JSON.stringify({name:t,email:a,password:n});C.a.post("/public/signup",r,{headers:{"Content-Type":"application/json"}}).then(function(t){return e({type:"REGISTER_SUCCESS",payload:t.data})}).catch(function(t){e(_(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:"REGISTER_FAIL"})})}},clearErrors:R})(function(e){var t=e.isAuthenticated,a=e.error,l=e.register,c=e.clearErrors,u=Object(n.useState)(!1),i=Object(o.a)(u,2),s=i[0],m=i[1],d=Object(n.useState)(""),E=Object(o.a)(d,2),p=E[0],g=E[1],L=Object(n.useState)(""),C=Object(o.a)(L,2),_=C[0],R=C[1],T=Object(n.useState)(""),w=Object(o.a)(T,2),N=w[0],k=w[1],G=Object(n.useState)(null),D=Object(o.a)(G,2),F=D[0],U=D[1],M=Object(n.useCallback)(function(){c(),m(!s)},[c,s]);return Object(n.useEffect)(function(){"REGISTER_FAIL"===a.id?U(a.msg.msg):U(null),s&&t&&M()},[a,M,t,s]),r.a.createElement("div",null,r.a.createElement(f.a,{onClick:M,href:"#"},"Register"),r.a.createElement(b.a,{isOpen:s,toggle:M},r.a.createElement(O.a,{toggle:M},"Register"),r.a.createElement(h.a,null,F?r.a.createElement(S.a,{color:"danger"},F):null,r.a.createElement(j.a,{onSubmit:function(e){e.preventDefault(),l({name:p,email:_,password:N})}},r.a.createElement(y.a,null,r.a.createElement(v.a,{for:"name"},"Name"),r.a.createElement(I.a,{type:"text",name:"name",id:"name",placeholder:"Name",className:"mb-3",onChange:function(e){return g(e.target.value)}}),r.a.createElement(v.a,{for:"email"},"Email"),r.a.createElement(I.a,{type:"email",name:"email",id:"email",placeholder:"Email",className:"mb-3",onChange:function(e){return R(e.target.value)}}),r.a.createElement(v.a,{for:"password"},"Password"),r.a.createElement(I.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:function(e){return k(e.target.value)}}),r.a.createElement(A.a,{color:"dark",style:{marginTop:"2rem"},block:!0},"Register"))))))}),N=Object(g.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}},{login:function(e){var t=e.email,a=e.password;return function(e){var n=JSON.stringify({email:t,password:a});C.a.post("/public/login",n,{headers:{"Content-Type":"application/json"}}).then(function(t){return e({type:"LOGIN_SUCCESS",payload:t.data})}).catch(function(t){e(_(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})})}},clearErrors:R})(function(e){var t=e.isAuthenticated,a=e.error,l=e.login,c=e.clearErrors,u=Object(n.useState)(!1),i=Object(o.a)(u,2),s=i[0],m=i[1],d=Object(n.useState)(""),E=Object(o.a)(d,2),p=E[0],g=E[1],L=Object(n.useState)(""),C=Object(o.a)(L,2),_=C[0],R=C[1],T=Object(n.useState)(null),w=Object(o.a)(T,2),N=w[0],k=w[1],G=Object(n.useCallback)(function(){c(),m(!s)},[c,s]);return Object(n.useEffect)(function(){"LOGIN_FAIL"===a.id?k(a.msg.msg):k(null),s&&t&&G()},[a,G,t,s]),r.a.createElement("div",null,r.a.createElement(f.a,{onClick:G,href:"#"},"Login"),r.a.createElement(b.a,{isOpen:s,toggle:G},r.a.createElement(O.a,{toggle:G},"Login"),r.a.createElement(h.a,null,N?r.a.createElement(S.a,{color:"danger"},N):null,r.a.createElement(j.a,null,r.a.createElement(y.a,null,r.a.createElement(v.a,{for:"email"},"Email"),r.a.createElement(I.a,{type:"email",name:"email",id:"email",placeholder:"Email",className:"mb-3",onChange:function(e){return g(e.target.value)}}),r.a.createElement(v.a,{for:"password"},"Password"),r.a.createElement(I.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:function(e){return R(e.target.value)}}),r.a.createElement(A.a,{color:"dark",style:{marginTop:"2rem"},block:!0,onClick:function(e){e.preventDefault(),l({email:p,password:_})}},"Login"))))))}),k=Object(g.b)(null,{logout:function(){return{type:"LOGOUT_SUCCESS"}}})(function(e){var t=e.logout;return r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{onClick:t,href:"#"},"Logout"))}),G=Object(g.b)(function(e){return{auth:e.auth}},null)(function(e){var t=e.auth,a=Object(n.useState)(!1),l=Object(o.a)(a,2),c=l[0],g=l[1],f=r.a.createElement(n.Fragment,null,r.a.createElement(u.a,null,r.a.createElement("span",{className:"navbar-text mr-3"},r.a.createElement("strong",null,t&&t.user?"Welcome ".concat(t.user.name):""))),r.a.createElement(u.a,null,r.a.createElement(k,null))),b=r.a.createElement(n.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(w,null)),r.a.createElement(u.a,null,r.a.createElement(N,null)));return r.a.createElement("div",null,r.a.createElement(i.a,{color:"dark",dark:!0,expand:"sm",className:"mb-5"},r.a.createElement(s.a,null,r.a.createElement(m.a,{href:"/"},"ShoppingList"),r.a.createElement(d.a,{onClick:function(){return g(!c)}}),r.a.createElement(E.a,{isOpen:c,navbar:!0},r.a.createElement(p.a,{className:"ml-auto",navbar:!0},t&&t.isAuthenticated?f:b)))))}),D=a(98),F=a(99),U=a(103),M=a(101),P=function(){return{type:"ITEMS_LOADING"}},x=Object(g.b)(function(e){return{item:e.item,isAuthenticated:e.auth.isAuthenticated}},{getItems:function(){return function(e,t){e(P()),C.a.get("/api",T(t)).then(function(t){return e({type:"GET_ITEMS",payload:t.data})}).catch(function(t){e(_(t.response.data,t.response.status))})}},deleteItem:function(e){return function(t,a){console.info(e),C.a.delete("/api/".concat(e),T(a)).then(function(a){t({type:"DELETE_ITEM",payload:e})})}}})(function(e){var t=e.getItems,a=e.item,l=e.isAuthenticated,c=e.deleteItem;Object(n.useEffect)(function(){t()},[t]);var o=a.items;return r.a.createElement(s.a,null,r.a.createElement(D.a,null,r.a.createElement(U.a,{className:"shopping-list"},o.map(function(e){var t=e.id,a=e.name;return r.a.createElement(M.a,{key:t,timeout:500,classNames:"fade"},r.a.createElement(F.a,null,l?r.a.createElement(A.a,{className:"remove-btn",color:"danger",size:"sm",onClick:function(){return function(e){c(e)}(t)}},"\xd7"):null,a))}))))}),B=Object(g.b)(function(e){return{item:e.item,isAuthenticated:e.auth.isAuthenticated}},{addItem:function(e){return function(t,a){C.a.post("/api",e,T(a)).then(function(e){t({type:"ADD_ITEM",payload:e.data.item})}).catch(function(e){t(_(e.response.data,e.response.status))})}}})(function(e){var t=e.isAuthenticated,a=e.addItem,l=Object(n.useState)(!1),c=Object(o.a)(l,2),u=c[0],i=c[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),d=m[0],E=m[1],p=function(){return i(!u)};return r.a.createElement("div",null,t?r.a.createElement(A.a,{color:"dark",style:{marginBottom:"2rem"},onClick:p},"Add Item"):r.a.createElement("h4",{className:"mb-3 ml-4"},"Please log in to manage items"),r.a.createElement(b.a,{isOpen:u,toggle:p},r.a.createElement(O.a,{toggle:p},"Add To Shopping List"),r.a.createElement(h.a,null,r.a.createElement(j.a,{onSubmit:function(e){e.preventDefault(),a({name:d}),p()}},r.a.createElement(y.a,null,r.a.createElement(v.a,{for:"item"},"Item"),r.a.createElement(I.a,{type:"text",name:"name",id:"item",placeholder:"Add shopping item",onChange:function(e){return E(e.target.value)}}),r.a.createElement(A.a,{color:"dark",style:{marginTop:"2rem"},block:!0},"Add Item"))))))}),J=a(17),z=a(37),X=a(13),H={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},V={msg:{},status:null,id:null},W=a(38),q={items:[],loading:!1},K=Object(J.b)({item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITEMS":return Object(X.a)({},e,{items:t.payload.products.items,loading:!1});case"DELETE_ITEM":return Object(X.a)({},e,{items:e.items.filter(function(e){return e.id!==t.payload})});case"ADD_ITEM":return Object(X.a)({},e,{items:[t.payload].concat(Object(W.a)(e.items))});case"ITEMS_LOADING":return Object(X.a)({},e,{loading:!0});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg.message,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return{msg:{},staus:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(X.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(X.a)({},e,{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.message),Object(X.a)({},e,t.payload,{isAuthenticated:!0,isLoading:!1});case"REGISTER_SUCCESS":return Object(X.a)({},e,t.payload,{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(X.a)({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}}}),Q=[z.a],Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.c,Z=Object(J.d)(K,{},Object(J.c)(Y(J.a.apply(void 0,Q))));var $=function(){return r.a.createElement(g.a,{store:Z},r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement(s.a,null,r.a.createElement(B,null),r.a.createElement(x,null))))},ee=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,100)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,l=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),l(e),c(e)})};c.a.render(r.a.createElement($,null),document.getElementById("root")),ee()}},[[40,3,2]]]);
//# sourceMappingURL=main.95d66498.chunk.js.map